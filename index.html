<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DuoFlix</title>
    <link rel="icon" href="./duck.svg">
</head>
<body>

    <div id="movie-list"></div>

    <script>
      const movieListContainer = document.getElementById('movie-list');
      const API_KEY = "de311323921e12c42bb99e8c0f0f35f6";
      const BASE_URL = "https://api.themoviedb.org/3";

      // Função para exibir filmes
      const displayMovies = (movies) => {
        movieListContainer.innerHTML = ''; // Limpa a lista
        movies.forEach(movie => {
          const movieElement = document.createElement('div');
          movieElement.classList.add('movie-card');

          // Verificar se o poster_path está disponível
          const posterPath = movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : './default-poster.jpg';

          movieElement.innerHTML = `
            <img src="${posterPath}" alt="${movie.title}">
            <h3>${movie.title}</h3>
            <p>${movie.overview}</p>
            <button onclick="showMovieDetails(${movie.id})">Ver Detalhes</button>
          `;
          movieListContainer.appendChild(movieElement);
        });
      };

      // Função para buscar filmes populares
      const fetchPopularMovies = async () => {
        try {
          const response = await fetch(`${BASE_URL}/movie/popular?api_key=${API_KEY}`);
          const data = await response.json();
          if (data.results) {
            return data.results;
          } else {
            console.error('Nenhum filme encontrado');
            return [];
          }
        } catch (error) {
          console.error('Erro ao buscar filmes:', error);
          return [];
        }
      };

      // Carregar filmes populares
      fetchPopularMovies().then(displayMovies);

      // Exemplo de função para mostrar detalhes de um filme (a ser implementada)
      const showMovieDetails = (movieId) => {
        alert(`Mostrar detalhes do filme com ID: ${movieId}`);
      };
    </script>

    <script src="script.js"></script>

</body>
</html>